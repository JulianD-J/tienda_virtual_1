<!DOCTYPE html>
<html lang="es">
<head>
<link rel="icon" type="image/png" href="assets/menulogo.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Colediverti - Tienda virtual</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: radial-gradient(circle at top, #0f2027, #203a43, #2c5364);
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: row;
    gap: 20px;
  }
  header {
    width: 100%;
    background: linear-gradient(90deg, #0f9b0f, #00b09b);
    color: white;
    text-align: center;
    padding: 15px;
    font-size: 1.5em;
    font-weight: bold;
  }
  .container {
    flex: 3;
    padding: 20px;
  }
  .filters {
    margin-bottom: 15px;
  }
  .filters button {
    background-color: #00b09b;
    border: none;
    color: white;
    padding: 8px 12px;
    margin: 5px;
    cursor: pointer;
    border-radius: 5px;
  }
  .filters button:hover {
    background-color: #0f9b0f;
  }
  .product {
    background-color: white;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    text-align: center;
  }
  .product img {
    max-width: 100%;
    border-radius: 8px;
    margin-bottom: 10px;
  }
  .product h3 {
    margin: 0;
  }
  .product p {
    margin: 5px 0;
  }
  .product button {
    background-color: #0f9b0f;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 5px;
    margin: 5px;
  }
  .product button:hover {
    background-color: #00b09b;
  }
  .cart {
    flex: 1;
    background-color: #e8f5e9;
    padding: 20px;
    border-left: 3px solid #0f9b0f;
  }
  .cart h2 {
    margin-top: 0;
  }
  .cart-item {
    border-bottom: 1px solid #ccc;
    padding: 5px 0;
  }
  .cart-item button {
    background-color: red;
    color: white;
    border: none;
    padding: 3px 6px;
    cursor: pointer;
    border-radius: 3px;
  }
  .checkout {
    background-color: #00b09b;
    color: white;
    text-align: center;
    padding: 10px;
    margin-top: 10px;
    display: block;
    border-radius: 5px;
    text-decoration: none;
    cursor: pointer;
  }
</style>
</head>
<body>
  <div style="width:100%; position:fixed; top:0; left:0;">
    <header>Colediverti - Men칰 Digital</header>
  </div>

  <div class="container" style="margin-top:70px;">
    <div class="filters">
      <button onclick="filterProducts('all')">Todos</button>
      <button onclick="filterProducts('bandas')">Bandas</button>
      <button onclick="filterProducts('celulares')">Celulares</button>
      <button onclick="filterProducts('computadoras')">Computadoras</button>
    </div>
    <div id="product-list"></div>
  </div>

  <div class="cart">
    <h2>Carrito</h2>
    <div id="cart-items"></div>
    <h3>Total: <span id="total">$0 COP</span></h3>
    <div class="checkout" onclick="goToPaycenter()">Ir a pagar</div>
  </div>

<script>
  const products = [
    { id: 1, name: "Xiaomi Smart Band 9", desc: "Monitor fitness compacto", price: 199900, category: "bandas", img: "assets/band9.webp" },
    { id: 2, name: "Xiaomi Smart Band 9 Pro", desc: "Pantalla m치s grande y GPS", price: 299900, category: "bandas", img: "assets/band9pro.webp" },
    { id: 3, name: "Xiaomi Smart Band 10 (nueva)", desc: "칔ltima generaci칩n", price: 350900, category: "bandas", img: "assets/band10.jpg" },
    { id: 4, name: "Samsung Galaxy S25", desc: "Rendimiento premium", price: 1499900, category: "celulares", img: "assets/s25.webp" },
    { id: 5, name: "Samsung Galaxy S25 Ultra (nuevo)", desc: "C치mara avanzada", price: 1999900, category: "celulares", img: "assets/s25ultra.webp" },
    { id: 6, name: "Google Pixel 10 Pro", desc: "Experiencia Android pura", price: 1799900, category: "celulares", img: "assets/pixel10pro.png" },
    { id: 7, name: "Asus ROG", desc: "Laptop gamer", price: 4999900, category: "computadoras", img: "assets/asusrog.jpg" },
    { id: 8, name: "Colediverti Computer 5", desc: "PC de alto rendimiento", price: 2999900, category: "computadoras", img: "assets/colediverti5.webp" }
  ];

  let cart = [];

  function renderProducts(filter) {
    const list = document.getElementById('product-list');
    list.innerHTML = '';
    products.filter(p => filter === 'all' || p.category === filter).forEach(product => {
      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML = `
        <img src="${product.img}" alt="${product.name}">
        <h3>${product.name}</h3>
        <p>${product.desc}</p>
        <p><strong>$${product.price.toLocaleString('es-CO')} COP</strong></p>
        <button onclick="addToCart(${product.id})">Agregar al carrito</button>
        <button onclick="location.href='detalle-${product.id}.html'">Ver m치s</button>
      `;
      list.appendChild(div);
    });
  }

  function addToCart(id) {
    const product = products.find(p => p.id === id);
    const item = cart.find(i => i.id === id);
    if (item) {
      item.qty++;
    } else {
      cart.push({ ...product, qty: 1 });
    }
    renderCart();
  }

  function removeFromCart(id) {
    cart = cart.filter(i => i.id !== id);
    renderCart();
  }

  function decreaseQty(id) {
    const item = cart.find(i => i.id === id);
    if (item.qty > 1) {
      item.qty--;
    } else {
      removeFromCart(id);
    }
    renderCart();
  }

  function renderCart() {
    const cartItems = document.getElementById('cart-items');
    const total = document.getElementById('total');
    cartItems.innerHTML = '';
    let totalPrice = 0;
    cart.forEach(item => {
      const subtotal = item.price * item.qty;
      totalPrice += subtotal;
      cartItems.innerHTML += `<div class='cart-item'>
                                ${item.name} (x${item.qty}) - $${subtotal.toLocaleString('es-CO')} COP
                                <button onclick="decreaseQty(${item.id})">-</button>
                                <button onclick="removeFromCart(${item.id})">Eliminar</button>
                              </div>`;
    });
    total.textContent = `$${totalPrice.toLocaleString('es-CO')} COP`;
  }

  function filterProducts(category) {
    renderProducts(category);
  }

 function goToPaycenter() {
  let codeArray = [];
  cart.forEach(item => {
    for (let i = 0; i < item.qty; i++) {
      codeArray.push(item.id);
    }
  });

  const codeString = codeArray.join('+');
  const totalPrice = cart.reduce((acc, item) => acc + item.price * item.qty, 0);

  // Guardar en localStorage en vez de portapapeles
  localStorage.setItem('cartCode', codeString);
  localStorage.setItem('cartTotal', totalPrice);

  alert("Tu pedido fue guardado. Ahora ve al PayCenter 游낁");

  window.location.href = "pago.html";
}


  renderProducts('all');
</script>
</body>
</html>
